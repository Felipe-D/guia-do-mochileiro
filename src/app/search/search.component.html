<ng-container class="container">
  <div class="cards">
    <div class="row section">
      <div class="col-12">
        <!-- <input type="search" [(ngModel)]="searchModel" placeholder="Pesquisar" (keyup.enter)="browse()"> -->
        <form class="form-inline" ngNativeValidate>
          <div class="col-4">
            <span>Cidade: </span>
            <input class="form-control" type="text" [(ngModel)]="cityModel" placeholder="Pesquisar" aria-label="Search" required="true" aria-required="true" [ngModelOptions]="{standalone: true}">
          </div>
          <div class="col-4">
              <span>Estabelecimento: </span>
            <input class="form-control" type="search" [(ngModel)]="searchModel" placeholder="Pesquisar" (keyup.enter)="browse()" aria-label="Search" [ngModelOptions]="{standalone: true}">
          </div>
        </form>
      </div>
    </div>
    <div class="row">
      <div class="col-8">
        <div id="map" class="rounded-lg" style="width:100%;height:400px; margin:0 auto;"></div>
      </div>
      <div class="col-4">
          <div class="card" style="height: 380px; overflow-y: auto;">
              <ul class="list-group list-group-flush">
                <li class="list-group-item" *ngFor="let result of results">
                    {{result.name}} <br>
                    <span style="float: right; cursor: pointer;" (click) ="getDetails(result.id, detailModal)"
                      data-toggle="modal" data-target="#detailModal">
                      Ver mais
                    </span>
                </li>
              </ul>
            </div>
      </div>
    </div>
  </div>
   <!-- Modal -->
   <ng-template #detailModal>
      <div class="modal-content col-12">
        <div class="modal-header">
          <h4 class="modal-title pull-left">{{details?.name}}</h4>
          <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body col-12" *ngIf="details.bestPhoto">
          <div class="row">
            <div class="col-12 center">
              <img class="img-thumbnail" width="250px" [src]="getPhoto(details.bestPhoto.prefix,details.bestPhoto.suffix)">
            </div>
          </div>
          <div class="row">
            <div class="col-12" *ngIf="details?.description">
              <h6>Descrição</h6>
              <span>{{details?.description}}</span>
            </div>
          </div>
          <div class="row">
              <div class="col-6" *ngIf="details.location?.address">
                  <h6>Endereço</h6>
                  <span>{{details?.location.address}}</span>
              </div>
            <div class="col-6" *ngIf="details.hours">
                <h6>Horário de Atendimento</h6>
                <span>{{details?.hours?.status}}</span>
            </div>
            <hr>
          </div>
          <div class="row">
            <div class="col-10" *ngIf="details.contact?.formattedPhone">
              <h6>Contatos</h6>
              <span>Facebook: {{details?.contact?.facebookName}}</span><br>
              <span>Instagram: {{details?.contact?.instagram}}</span><br>
              <span>Telefone: {{details?.contact?.formattedPhone}}</span><br>
              <span *ngIf="details?.url">Site: {{details?.url}}</span>
            </div>
            <div class="col-2" *ngIf="details.rating">
                <h6>Nota</h6>
                <span>{{details?.rating}}</span>
            </div>
          </div>
          <div class="row">
              <div class="col-10" *ngIf="details.tips?.groups[0]?.items[0]">
                  <h6>Comentários</h6>
                  <span>
                    <strong>{{details?.tips?.groups[0].items[0].user.firstName}} {{details?.tips?.groups[0].items[0].user.lastName}}</strong>
                  </span><br>
                  <span>{{details?.tips?.groups[0].items[0].text}}</span>
              </div>
              <hr>
          </div>
          <div class="row"></div>
        </div>
      </div>
    </ng-template>
</ng-container>
